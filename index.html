<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./Styles/index.css">
</head>
<script>
    navigator.serviceWorker.register('./firebase-messaging-sw.js').then((data) => {
        console.log(data)
    }).catch((err) => {
        console.log(err)
    })

</script>

<body>
    <div class="mainContainer">
        <div class="redirectionContainer">
            <div class="redirectToDetails redirectionBtns" onclick="redirectSection('details')">
                See Details <img src="./Images/arrow.webp" class="arrows rightArrow" />
            </div>
            <div class="redirectToForm redirectionBtns" onclick="redirectSection('form')">
                <img src="./Images/arrow.webp" class="arrows leftArrow" />
                Go To Form
            </div>
        </div>
        <div class="formContainer">
            <div class="formMainHeading">Fill The Form</div>
            <div class="formHeading">First Name</div>
            <input type="text" class="formInput" id="firstName" />
            <span class="errMsg" id="firstNameErr"></span>
            <div class="formHeading">Last Name</div>
            <input type="text" class="formInput" id="lastName" />
            <span class="errMsg" id="lastNameErr"></span>
            <div class="formHeading">Email</div>
            <input type="email" class="formInput" id="email" />
            <span class="errMsg" id="emailErr"></span>
            <div class="formHeading">Country</div>
            <input type="text" class="formInput" id="country" />
            <span class="errMsg" id="countryErr"></span>
            <div class="formHeading">State</div>
            <input type="text" class="formInput" id="state" />
            <span class="errMsg" id="stateErr"></span>
            <div class="formHeading">City</div>
            <input type="text" class="formInput" id="city" />
            <span class="errMsg" id="cityErr"></span>

            <div class="formHeading">Gender</div>
            <div class="inputContainer">
                <label for="male" class="formLabel">
                    <input type="radio" name="gender" id="male" class="formInput formInput--radio" checked />Male
                </label>
                <label for="female" class="formLabel">
                    <input type="radio" name="gender" id="female" class="formInput formInput--radio" />Female
                </label>
                <label for="others" class="formLabel">
                    <input type="radio" name="gender" id="others" class="formInput formInput--radio" />Others
                </label>
            </div>
            <span class="errMsg" id="genderErr"></span>

            <div class="formHeading">Date Of Birth</div>
            <input type="date" class="formInput" id="dob" />
            <span class="errMsg" id="dobErr"></span>

            <div class="formHeading">Age</div>
            <input type="text" class="formInput" id="age" />
            <span class="errMsg" id="ageErr"></span>



            <button class="formSubmit" onclick="submitForm()">Submit</button>
        </div>
        <div class="detailsContainer">
            <table class="detailsTable"></table>
        </div>
        <div class="loader">Loading...</div>
    </div>
</body>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
    import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-messaging.js";


    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyDkeQhIjKjXl6ruJwZ3lOG0LwSa5-T9qLs",
        authDomain: "prateek-5bd13.firebaseapp.com",
        projectId: "prateek-5bd13",
        storageBucket: "prateek-5bd13.appspot.com",
        messagingSenderId: "550542718433",
        appId: "1:550542718433:web:1d980152172f1ba987cea0",
        measurementId: "G-4CHHHCPN48"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const message = getMessaging(app);
    getToken(message, { vapidKey: 'BKg-GBUo80Qroeqgvb6wNnH3gMwNF1u4nGoJFvCIp5iZRLq6FgVSXUCYoF6IWhpOavBqlK1c5Kf2TOYA2piMYWU' }).then((currentToken) => {
        if (currentToken) {
        document.write(currentToken)
            // Send the token to your server and update the UI if necessary
            // ...
        } else {
            // Show permission request UI
            console.log('No registration token available. Request permission to generate one.');
            // ...
        }
    }).catch((err) => {
        console.log('An error occurred while retrieving token. ', err);
        // ...
    });
    onMessage(message, (payload) => {
        if (window.innerWidth > 900) {
            new Notification("title", { "body": "hello" })
            console.log('Message received. ', payload);
        }

        // Update the UI to include the received message.
    });
</script>
<script src="./script.js"></script>

</html>